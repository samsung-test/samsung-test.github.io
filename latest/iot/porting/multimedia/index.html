<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon"  href="/favicon.ico" />
<title>Multimedia</title>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<base id="baseURL" href="/latest/" />
<meta id="docsVersion" content="1.1" />
<meta name="last-modified" content="2019-12-04 22:39:07 +0530" />
<meta http-equiv="cache-control" content="max-age=24" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-store" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="Expires" content="600" />

<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/pygments/perldoc.css">
<link rel="stylesheet" href="/css/style.css?v=04122019">
<link rel="stylesheet" href="/css/github.css?v=04122019">


</head>
<body class=" latestVersion">
	 <header>
    <div class="header">
        <nav class="nav-secondary-tabs affix" >
            <div class="container-fluid">
                <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
                    <div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <a class="logo" href="/" title="Tizen Documentation">
        Tizen
    </a>
    <div id="tabs">
        
        
        <ul class="tabs" id="jsTOCHorizontal">
            <li>
                <a href="platform/developing/cloning">Get Tizen</a>
            </li>
            <li class="">
                <a href="platform/about/tizen-open-source-overview">Platform</a>
            </li>
            <li class="">
                <a href="application/">Application</a>
            </li>
            <li class="active">
                <a href="iot/">IoT</a>
            </li>
            <li class="">
                <a href="tizenstudio/">Tizen Studio</a>
            </li>
            <li>
                <a href="https://developer.tizen.org/development/tizen-studio/download" target="_blank">Download</a>
            </li>
            <li>
                <a href="https://www.tizen.org/user/register" target="_blank">Register</a>
            </li>
        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="widgetVersionSwitcher"></div>
    </div>
    <div class="search-form">
        <form action="search.html">
            <input class="search-field form-control ds-input st-search-input" value="" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto">
            <button type="submit" class="search-button">
                <i class="fa fa-search"></i>
            </button>
        </form>
    </div>
    
</div>

                </div>
            </div>
        </nav>
    </div>
</header>
    <div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							<div class="widgetLatestVersionNotification"></div>
							<h1 id="multimedia">Multimedia</h1>

<p>You can implement various multimedia features, such as camera, audio, and video.</p>

<h2 id="camera">Camera</h2>

<p>The Multimedia camcorder framework controls the GStreamer camera plugin to capture camera data from the device. The kernel interfaces to control the camera device can be different for different chipsets, so the camera HAL (Hardware Abstraction Layer) used by the camera plugin is provided and it must be implemented specifically for each chipset. Each configuration file contains its own specific hardware-dependent information. The Multimedia camcorder framework reads and parses the information in these configuration files.</p>

<p><strong>Figure: Multimedia camcorder framework</strong></p>

<p><img src="media/799px-tizen3.0-mmfwcamcorder.png" alt="Multimedia camcorder framework" /></p>

<ul>
  <li>
    <p>Camera source plugin for GStreamer</p>

    <p>Gets the camera data (preview or captured image) and sets various camera commands through camera HAL interface</p>
  </li>
  <li>
    <p>Camera HAL</p>

    <p>Common interface to control the camera device on various shipsets and used by the camera source plugin.</p>
  </li>
  <li>
    <p>Configuration files</p>

    <p>There are 3 config files for the Multimedia camcorder framework. They are provided by <code class="highlighter-rouge">mmfw- sysconf-xxx</code>:</p>
    <ul>
      <li><code class="highlighter-rouge">mmfw_camcorder.ini</code></li>
      <li><code class="highlighter-rouge">mmfw_camcorder_dev_video_pri.ini</code></li>
      <li><code class="highlighter-rouge">mmfw_camcorder_dev_video_sec.ini</code></li>
    </ul>
  </li>
</ul>

<h3 id="porting-the-oal-interface">Porting the OAL Interface</h3>

<p>Tizen provides a default reference camera source plugin which uses the camera HAL interface.</p>

<p>For the camera HAL, the <code class="highlighter-rouge">mm-hal-interface</code> package provides a header file:</p>

<ul>
  <li>Repository path: <code class="highlighter-rouge">platform/core/multimedia/mm-hal-interface</code></li>
  <li>File name: <code class="highlighter-rouge">tizen-camera.h</code></li>
</ul>

<h4 id="major-camera-hal-functions">Major Camera HAL Functions</h4>

<p>The following list defines the major functions for the camera HAL interface:</p>

<ul>
  <li>
    <p>Functions for initialization and deinitialization:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*Initializes new camera HAL handle */</span>
<span class="kt">int</span> <span class="nf">camera_init</span><span class="p">(</span><span class="kt">void</span> <span class="o">**</span><span class="n">camera_handle</span><span class="p">);</span>

<span class="cm">/* Deinitializes the camera HAL handle */</span>
<span class="kt">int</span> <span class="nf">camera_deinit</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for opening and closing the camera device:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Opens the camera device */</span>
<span class="kt">int</span> <span class="nf">camera_open_device</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device_index</span><span class="p">);</span>

<span class="cm">/* Closes the camera device */</span>
<span class="kt">int</span> <span class="nf">camera_close_device</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for getting device information:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Gets the camera device list */</span>
<span class="kt">int</span> <span class="nf">camera_get_device_list</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_device_list_t</span> <span class="o">*</span><span class="n">device_list</span><span class="p">);</span>

<span class="cm">/* Registers a callback function to be called to send a message by the camera HAL */</span>
<span class="kt">int</span> <span class="nf">camera_add_message_callback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_message_cb</span> <span class="n">callback</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">cb_id</span><span class="p">);</span>

<span class="cm">/* Unregisters a callback function */</span>
<span class="kt">int</span> <span class="nf">camera_remove_message_callback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">cb_id</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for preview and capture:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">camera_format</span> <span class="p">{</span>
    <span class="n">camera_pixel_format_t</span> <span class="n">stream_format</span><span class="p">;</span>
    <span class="n">camera_resolution_t</span> <span class="n">stream_resolution</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">stream_fps</span><span class="p">;</span>
    <span class="n">camera_rotation_t</span> <span class="n">stream_rotation</span><span class="p">;</span>
    <span class="n">camera_pixel_format_t</span> <span class="n">capture_format</span><span class="p">;</span>
    <span class="n">camera_resolution_t</span> <span class="n">capture_resolution</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">capture_quality</span><span class="p">;</span>
<span class="p">}</span> <span class="n">camera_format_t</span><span class="p">;</span>

<span class="cm">/* Sets the format of the preview stream */</span>
<span class="kt">int</span> <span class="nf">camera_set_preview_stream_format</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_format_t</span> <span class="o">*</span><span class="n">format</span><span class="p">);</span>

<span class="cm">/* Gets the format of the preview stream  */</span>
<span class="kt">int</span> <span class="nf">camera_get_preview_stream_format</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_format_t</span> <span class="o">*</span><span class="n">format</span><span class="p">);</span>

<span class="k">typedef</span> <span class="nf">int</span> <span class="p">(</span><span class="o">*</span><span class="n">camera_preview_frame_cb</span><span class="p">)(</span><span class="n">camera_buffer_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="n">camera_metadata_t</span> <span class="o">*</span><span class="n">meta</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>

<span class="cm">/* Starts the display of preview frames on the scree. */</span>
<span class="kt">int</span> <span class="nf">camera_start_preview</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_preview_frame_cb</span> <span class="n">callback</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>

<span class="cm">/* Stops the preview frames */</span>
<span class="kt">int</span> <span class="nf">camera_stop_preview</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">);</span>

<span class="cm">/* Releases the preview buffer; the preview buffer must be released with this function after using it */</span>
<span class="kt">int</span> <span class="nf">camera_release_preview_buffer</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">buffer_index</span><span class="p">);</span>

<span class="cm">/* Starts the camera auto-focusing operation */</span>
<span class="kt">int</span> <span class="nf">camera_start_auto_focus</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">);</span>

<span class="cm">/* Stops the camera auto-focusing operation */</span>
<span class="kt">int</span> <span class="nf">camera_stop_auto_focus</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">);</span>

<span class="k">typedef</span> <span class="nf">int</span> <span class="p">(</span><span class="o">*</span><span class="n">camera_capture_cb</span><span class="p">)(</span><span class="n">camera_buffer_t</span> <span class="o">*</span><span class="n">main</span><span class="p">,</span> <span class="n">camera_buffer_t</span> <span class="o">*</span><span class="n">postview</span><span class="p">,</span> <span class="n">camera_buffer_t</span> <span class="o">*</span><span class="n">thumbnail</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>

<span class="cm">/* Starts capturing still images */</span>
<span class="kt">int</span> <span class="nf">camera_start_capture</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_capture_cb</span> <span class="n">callback</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>

<span class="cm">/* Stops capturing still images */</span>
<span class="kt">int</span> <span class="nf">camera_stop_capture</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for video recording:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Stops capturing still images */</span>
<span class="kt">int</span> <span class="nf">camera_set_video_stream_format</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_format_t</span> <span class="o">*</span><span class="n">format</span><span class="p">);</span>

<span class="cm">/* Gets the video stream format for recording */</span>
<span class="kt">int</span> <span class="nf">camera_get_video_stream_format</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_format_t</span> <span class="o">*</span><span class="n">format</span><span class="p">);</span>

<span class="k">typedef</span> <span class="nf">int</span> <span class="p">(</span><span class="o">*</span><span class="n">camera_video_frame_cb</span><span class="p">)(</span><span class="n">camera_buffer_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="n">camera_metadata_t</span> <span class="o">*</span><span class="n">meta</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>

<span class="cm">/* Starts the video frame for recording */</span>
<span class="kt">int</span> <span class="nf">camera_start_record</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_video_frame_cb</span> <span class="n">callback</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>

<span class="cm">/* Stops the video frame */</span>
<span class="kt">int</span> <span class="nf">camera_stop_record</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">);</span>

<span class="cm">/* Video buffer must be released with this function after using it */</span>
<span class="kt">int</span> <span class="nf">camera_release_video_buffer</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">buffer_index</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for controlling the camera device:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define CAMERA_COMMAND_BASE                     ((int64_t)1)
#define CAMERA_COMMAND_WHITE_BALANCE            ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 1))
#define CAMERA_COMMAND_ISO                      ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 2))
#define CAMERA_COMMAND_CONTRAST                 ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 3))
#define CAMERA_COMMAND_SATURATION               ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 4))
#define CAMERA_COMMAND_HUE                      ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 5))
#define CAMERA_COMMAND_SHARPNESS                ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 6))
#define CAMERA_COMMAND_EFFECT                   ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 7))
#define CAMERA_COMMAND_SCENE_MODE               ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 8))
#define CAMERA_COMMAND_EXPOSURE_MODE            ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 9))
#define CAMERA_COMMAND_EXPOSURE                 ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 10))
#define CAMERA_COMMAND_ROTATION                 ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 11))
#define CAMERA_COMMAND_FLIP                     ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 12))
#define CAMERA_COMMAND_FOCUS_MODE               ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 13))
#define CAMERA_COMMAND_FOCUS_RANGE              ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 14))
#define CAMERA_COMMAND_SHOT_MODE                ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 15))
#define CAMERA_COMMAND_ANTI_SHAKE               ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 16))
#define CAMERA_COMMAND_FOCUS_AREA               ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 17))
#define CAMERA_COMMAND_DIGITAL_ZOOM             ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 18))
#define CAMERA_COMMAND_OPTICAL_ZOOM             ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 19))
#define CAMERA_COMMAND_RECORDING_HINT           ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 20))
#define CAMERA_COMMAND_WDR                      ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 21))
#define CAMERA_COMMAND_SHUTTER_SPEED            ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 22))
#define CAMERA_COMMAND_FLASH_MODE               ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 23))
#define CAMERA_COMMAND_FACE_DETECTION           ((int64_t)(CAMERA_COMMAND_BASE &lt;&lt; 24))
</span>
<span class="cm">/* Sets various commands and values to control the camera device */</span>
<span class="kt">int</span> <span class="nf">camera_set_command</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="kt">int64_t</span> <span class="n">command</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>

<span class="cm">/* Gets the current value of the command */</span>
<span class="kt">int</span> <span class="nf">camera_get_command</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="kt">int64_t</span> <span class="n">command</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">camera_batch_command_control</span> <span class="p">{</span>
    <span class="cm">/* Flag for modified command */</span>
    <span class="kt">int64_t</span> <span class="n">command_set_flag</span><span class="p">;</span>

    <span class="cm">/* Value list */</span>
    <span class="n">camera_white_balance_t</span> <span class="n">white_balance</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">iso</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">contrast</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">saturation</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">hue</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">sharpness</span><span class="p">;</span>
    <span class="n">camera_effect_t</span> <span class="n">effect</span><span class="p">;</span>
    <span class="n">camera_scene_mode_t</span> <span class="n">scene_mode</span><span class="p">;</span>
    <span class="n">camera_exposure_mode_t</span> <span class="n">exposure_mode</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">exposure</span><span class="p">;</span>
    <span class="n">camera_rotation_t</span> <span class="n">rotation</span><span class="p">;</span>
    <span class="n">camera_flip_t</span> <span class="n">flip</span><span class="p">;</span>
    <span class="n">camera_focus_mode_t</span> <span class="n">focus_mode</span><span class="p">;</span>
    <span class="n">camera_focus_range_t</span> <span class="n">focus_range</span><span class="p">;</span>
    <span class="n">camera_exposure_mode_t</span> <span class="n">shot_mode</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">anti_shake</span><span class="p">;</span>
    <span class="n">camera_rectangle_t</span> <span class="n">focus_area</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">digital_zoom</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">optical_zoom</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">recording_hint</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">wdr</span><span class="p">;</span>
    <span class="n">camera_flash_mode_t</span> <span class="n">flash_mode</span><span class="p">;</span>
    <span class="n">camera_face_detection_t</span> <span class="n">face_detection</span><span class="p">;</span>
<span class="p">}</span> <span class="n">camera_batch_command_control_t</span><span class="p">;</span>

<span class="cm">/* Sets a batch set of commands */</span>
<span class="kt">int</span> <span class="nf">camera_set_batch_command</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">camera_handle</span><span class="p">,</span> <span class="n">camera_batch_command_control_t</span> <span class="o">*</span><span class="n">batch_command</span><span class="p">,</span> <span class="kt">int64_t</span> <span class="o">*</span><span class="n">error_command</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="configuration">Configuration</h3>

<p>To configure the camera, read the keywords and their values from the configuration files. Recognize the categories by using the keyword list of the MSL camcorder, and save the member structure of the MSL camcorder. Later, these values are used as attribute values or some other operation. The permission of this file is read-only to make sure the configuration files are read once before creating the camcorder. To add comments in the config file, use a semicolon (“;”).</p>

<p>The following table shows the description of the <code class="highlighter-rouge">mmfw_camcorder.ini</code> file.</p>

<p><strong>Table: mmfw_camcorder.ini file</strong></p>

<table>
  <thead>
    <tr>
      <th>Category</th>
      <th>Entry</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>General</td>
      <td> </td>
      <td>General setting or information</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">SyncStateChange</code></td>
      <td>API running type. This value must be 1 (<code class="highlighter-rouge">TRUE</code>).</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">ModelName</code></td>
      <td>Model name of target</td>
    </tr>
    <tr>
      <td>Video input</td>
      <td> </td>
      <td>Setting list related to video input</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">UseConfCtrl</code></td>
      <td>Whether to use the configuration file. This value must be 1 (<code class="highlighter-rouge">TRUE</code>).</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">ConfCtrlFile0</code> or <code class="highlighter-rouge">1</code></td>
      <td>Name of the setting file to control the camera device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">VideosrcElement</code></td>
      <td>Source plugin which obtains the camera input buffer from the device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">UseZeroCopyFormat</code></td>
      <td>Whether to use the zero copy format</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">DeviceCount</code></td>
      <td>Number of camera device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">SupportMediaPacketPreviewCb</code></td>
      <td>Whether the camera API supports media packet preview callback on the target</td>
    </tr>
    <tr>
      <td>Audio input</td>
      <td> </td>
      <td>Setting list related to audio input</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">AudiosrcElement</code></td>
      <td>Audio source plugin which obtains audio for the camcorder or voice recorder</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">AudiomodemsrcElement</code></td>
      <td>Audio source plugin which obtains audio for call recording</td>
    </tr>
    <tr>
      <td>Video input</td>
      <td> </td>
      <td>Setting list related to video output</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">DisplayDevice</code></td>
      <td>Supported output device list and the default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Videosink</code></td>
      <td>Supported output surface list and the default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">VideosinkElementOverlay</code></td>
      <td>Plugin name for the Overlay output surface and the property setting list</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">VideosinkElementEvas</code></td>
      <td>Plugin name for the Evas output surface and the property setting list</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">VideosinkElementGL</code></td>
      <td>Plugin name for the GL output surface and the property setting list</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">VideosinkElementNULL</code></td>
      <td>Plugin name for the <code class="highlighter-rouge">NULL</code> surface and the property setting list</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Video encoder</code></td>
      <td>Video encoder list for video recording</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Audio encoder</code></td>
      <td>Audio encoder list for AV recording or voice recording</td>
    </tr>
    <tr>
      <td>Capture</td>
      <td> </td>
      <td>Setting list related to image capture</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">UseEncodebin</code></td>
      <td>Whether to use the <code class="highlighter-rouge">encodebin</code> to capture the image. Keep this value as 0 (<code class="highlighter-rouge">FALSE</code>).</td>
    </tr>
    <tr>
      <td>Record</td>
      <td> </td>
      <td>Setting value list for each recording mode. Keep the values of the example config file.</td>
    </tr>
    <tr>
      <td>Mux</td>
      <td> </td>
      <td>Mux plugin list related with the file container</td>
    </tr>
  </tbody>
</table>

<p>The following table shows the description of the <code class="highlighter-rouge">mmfw_camcorder_dev_video_pri.ini</code> file for the primary camera (usually the rear camera) and the <code class="highlighter-rouge">mmfw_camcorder_dev_video_sec.ini</code> file for the secondary camera (usually the front camera).</p>

<p><strong>Table: mmfw_camcorder_dev_video_pri.ini</strong></p>

<table>
  <thead>
    <tr>
      <th>Category</th>
      <th>Entry</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Camera</td>
      <td> </td>
      <td>Information about the camera</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">InputIndex</code></td>
      <td>Camera number to select (primary or secondary)</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">DeviceName</code></td>
      <td>Name of the camera module</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">PreviewResolution</code></td>
      <td>List of all supported preview resolutions the user can set, as well as the default value for this camera device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">CaptureResolution</code></td>
      <td>List of all supported capture resolutions the user can set, as well as the default value for this camera device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">VideoResolution</code></td>
      <td>List of all supported video resolutions the user can set, as well as the default value for this camera device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">FPS0 ~ 9</code></td>
      <td>List of all supported FPS (Frame Per Second) settings by preview resolution the user can use, as well as the default value for this camera device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">PictureFormat</code></td>
      <td>List of all supported preview formats a user can set, as well as the default value for this camera device</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">RecommendDisplayRotation</code></td>
      <td>Default display rotation value for displaying camera input</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">RecommendPreviewFormatCapture</code></td>
      <td>Recommended preview format for capturing images</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">RecommendPreviewFormatRecord</code></td>
      <td>Recommended preview format for recording</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">RecommendPreviewResolution</code></td>
      <td>Recommended preview resolution by ratio of preview resolution</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">FacingDirection</code></td>
      <td>Facing direction of camera device</td>
    </tr>
    <tr>
      <td>Strobe</td>
      <td> </td>
      <td>Camera flash settings</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">StrobeMode</code></td>
      <td>Supported strobe mode and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td>Effect</td>
      <td> </td>
      <td>Effect settings</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Brightness</code></td>
      <td>Supported range of brightness and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Contrast</code></td>
      <td>Supported range of contrast and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Saturation</code></td>
      <td>Supported range of saturation and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Sharpness</code></td>
      <td>Supported range of sharpness and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">Whitebalance</code></td>
      <td>Supported white balance list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">ColorTone</code></td>
      <td>Supported color tone list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">WDR</code></td>
      <td>Supported Wide Dynamic Range mode list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td>Photograph</td>
      <td> </td>
      <td>Camera shooting settings</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">DigitalZoom</code></td>
      <td>Supported range of digital zoom level and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">OpticalZoom</code></td>
      <td>Supported range of optical zoom level and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">FocusMode</code></td>
      <td>Supported focus mode list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">AFType</code></td>
      <td>Supported AUTO Focus mode list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">AEType</code></td>
      <td>Supported AUTO Exposure mode list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">ExposureValue</code></td>
      <td>Supported range of exposure value and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">ISO</code></td>
      <td>Supported ISO list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">ProgramMode</code></td>
      <td>Supported program mode (scene mode) list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">AntiHandshake</code></td>
      <td>Supported anti-hand shake mode list and default value. This is converted to a real value and used in the kernel internally.</td>
    </tr>
    <tr>
      <td>Capture</td>
      <td> </td>
      <td>Image capture settings</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">OutputMode</code></td>
      <td>Supported capture format list and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">JpegQuality</code></td>
      <td>Supported range of JPEG quality and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">MultishotNumber</code></td>
      <td>Supported range of multi shot count and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">SensorEncodedCapture</code></td>
      <td>Whether the camera device supports encoded capture format (such as JPEG)</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">SupportHDR</code></td>
      <td>Supported HDR mode list and default value</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">SupportZSL</code></td>
      <td>Whether the camera device supports zero shutter lag capture</td>
    </tr>
    <tr>
      <td>Detect</td>
      <td> </td>
      <td>Detect function settings</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="highlighter-rouge">DetectMode</code></td>
      <td>Supported detect mode list and default value</td>
    </tr>
  </tbody>
</table>

<h3 id="references">References</h3>

<ul>
  <li>
    <p>Driver configuration</p>

    <p>Set the kernel <code class="highlighter-rouge">.config</code> values for the camera:</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONFIG_VIDEO_DEV = y
CONFIG_VIDEO_SAMSUNG = y
CONFIG_VIDEO_SAMSUNG_V4L2 = y
CONFIG_VIDEO_FIMC = y
CONFIG_VIDEO_FIMC_MMAP_OUTPUT_CACHE = y
CONFIG_VIDEO_FIMC_MIPI = y
CONFIG_VIDEO_FIMG2D = y
CONFIG_VIDEO_JPEG = y
CONFIG_VIDEO_MFC5X = y
</code></pre></div>    </div>
  </li>
  <li>
    <p>Kernel node</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>For Camera: /dev/video1
Other CAMIF interfaces: /dev/video(0-3)
</code></pre></div>    </div>
  </li>
  <li>
    <p>GStreamer</p>

    <p>For more information about GStreamer, see <a href="http://gstreamer.freedesktop.org/documentation/">http://gstreamer.freedesktop.org/documentation/</a> and <a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/index.html">http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/index.html</a>.</p>
  </li>
  <li>
    <p>V4L2</p>

    <p>For more information about V4L2, see <a href="http://v4l2spec.bytesex.org/spec-single/v4l2.html">http://v4l2spec.bytesex.org/spec-single/v4l2.html</a>.</p>
  </li>
</ul>

<h2 id="radio">Radio</h2>

<p>The radio interface part of the multimedia framework supports APIs to implement the following FM radio features:</p>

<ul>
  <li>Tuning a frequency</li>
  <li>Getting and setting a frequency</li>
  <li>Scanning all available frequencies</li>
  <li>Seeking up and down</li>
  <li>Getting the frequency signal</li>
</ul>

<p><strong>Figure: Multimedia radio framework</strong></p>

<p><img src="media/800px-radio.png" alt="Multimedia radio framework" /></p>

<p>Because the interfaces for controlling the radio device differ, Tizen provides the Radio Hardware Abstraction Layer (HAL) to control various radio devices with a common interface. With the common interface, you can control the radio device on various chipsets used by the <code class="highlighter-rouge">libmm-radio</code>.</p>

<h3 id="porting-the-oal-interface-1">Porting the OAL Interface</h3>

<p>The OAL interface for FM radio is the radio HAL interface.</p>

<p>The <code class="highlighter-rouge">mm-hal-interface</code> package provides the radio HAL header file:</p>

<ul>
  <li>Repository path: <code class="highlighter-rouge">platform/core/multimedia/mm-hal-interface</code></li>
  <li>File name: <code class="highlighter-rouge">tizen-radio.h</code></li>
</ul>

<p>The OAL interface for FM radio is the <a href="https://wiki.tizen.org/Linux">Linux</a> kernel V4L2 interface. The radio module directly uses the V4L2 <code class="highlighter-rouge">ioctls</code> to perform various radio hardware configurations.</p>

<h4 id="major-radio-hal-functions">Major Radio HAL Functions</h4>

<p>The following list defines the major functions for the radio HAL interface:</p>

<ul>
  <li>
    <p>Functions for initialization and deinitialization:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Initializes a new radio HAL handle */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_init</span><span class="p">(</span><span class="kt">void</span> <span class="o">**</span><span class="n">radio_handle</span><span class="p">);</span>

<span class="cm">/* Deinitializes the radio HAL handle */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_deinit</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for preparing and unpreparing the radio device:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Prepares the radio device */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_prepare_device</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>

<span class="cm">/* Unprepares the radio device */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_unprepare_device</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for opening and closing the radio device:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Opens the radio device */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_open_device</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>

<span class="cm">/* Closes the radio device */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_close_device</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for starting and stopping the radio device:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Starts the radio device */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_start</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>

<span class="cm">/* Stops the radio device */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_stop</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for setting and getting the frequency:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Gets the radio frequency */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_get_frequency</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">frequency</span><span class="p">);</span>

<span class="cm">/* Sets the radio frequency */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_set_frequency</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">frequency</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for seeking channels:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="n">radio_seek_direction_type</span> <span class="p">{</span>
    <span class="n">RADIO_SEEK_DIRECTION_UP</span><span class="p">,</span> <span class="cm">/* Seek upward */</span>
    <span class="n">RADIO_SEEK_DIRECTION_DOWN</span> <span class="cm">/* Seek downward */</span>
<span class="p">}</span> <span class="n">radio_seek_direction_type_t</span><span class="p">;</span>

<span class="cm">/* Asynchronously seeks (up or down) the effective frequency of the radio */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_seek</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">,</span> <span class="n">radio_seek_direction_type_t</span> <span class="n">direction</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for  muting and unmuting the radio device:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Mutes the radio */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_mute</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>

<span class="cm">/* Unmutes the radio */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_unmute</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for setting and getting the volume:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Gets the current radio volume */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_get_volume</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">,</span> <span class="kt">float</span> <span class="o">*</span><span class="n">volume</span><span class="p">);</span>

<span class="cm">/* Sets the current radio volume */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_set_volume</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">,</span> <span class="kt">float</span> <span class="n">volume</span><span class="p">);</span>

<span class="cm">/* Sets the current media volume level (system media volume) */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_set_media_volume</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">level</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Functions for getting the signal strength:</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Gets the current signal strength of the radio */</span>
<span class="n">radio_error_t</span> <span class="nf">radio_set_media_volume</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">radio_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">level</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="references-1">References</h3>

<ul>
  <li>
    <p>Kernel node</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>For Radio: /dev/radio0
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="audio">Audio</h2>

<p>The following figure illustrates the different audio layers.</p>

<p><strong>Figure: Audio layers</strong></p>

<p><img src="./media/797px-audio.png" alt="Audio layers" /></p>

<ul>
  <li>PulseAudio
    <ul>
      <li>PulseAudio is a sound server accepting sound input from 1 or more sources and redirecting it to 1 or more sinks. It has the following features:
        <ul>
          <li>Software mixing of multiple audio streams</li>
          <li>Support for multiple audio sources and sinks</li>
          <li>An extensible plugin architecture with support for loadable modules</li>
          <li>Low-latency operation</li>
          <li>Support for external devices, such as Bluetooth audio and USB audio devices</li>
        </ul>
      </li>
      <li>Pulseaudio interacts with AudioHAL interfaces to support various device types.</li>
    </ul>
  </li>
  <li>Audio HAL
    <ul>
      <li>Predefined interfaces for Audio Hardware Abstraction Layer (HAL)</li>
      <li>Interfaces include the following categories: volume, route, stream, PCM</li>
    </ul>
  </li>
  <li>
    <p>Configuration files</p>

    <p>Configurations for running Pulseaudio and Audio Systems which can be modified without code changes.</p>

    <ul>
      <li>pulseaudio configurations (such as <code class="highlighter-rouge">daemon.conf</code>, <code class="highlighter-rouge">client.conf</code>, <code class="highlighter-rouge">system.pa</code>)</li>
      <li>stream/device configuration (<code class="highlighter-rouge">stream-map.json</code>, <code class="highlighter-rouge">device-map.json</code>)</li>
    </ul>
  </li>
</ul>

<h3 id="porting-the-oal-interface-2">Porting the OAL Interface</h3>

<p>The following example defines the major functions for the audio HAL interface:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Initializes the audio HAL handle */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_init</span><span class="p">(</span><span class="kt">void</span> <span class="o">**</span><span class="n">audio_handle</span><span class="p">);</span>

<span class="cm">/* Deinitializes the audio HAL handle */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_deinit</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">);</span>

<span class="cm">/* Gets the maximum volume level supported for a particular volume information */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_get_volume_level_max</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_volume_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">level</span><span class="p">);</span>

<span class="cm">/* Gets the volume level specified for a particular volume information */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_get_volume_level</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_volume_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">level</span><span class="p">);</span>

<span class="cm">/* Sets the volume level specified for a particular volume information */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_set_volume_level</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_volume_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">level</span><span class="p">);</span>

<span class="cm">/* Gets the volume value specified for a particular volume information and level */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_get_volume_value</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_volume_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">level</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>

<span class="cm">/* Gets the volume mute specified for a particular volume information */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_get_volume_mute</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_volume_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">mute</span><span class="p">);</span>

<span class="cm">/* Sets the volume mute specified for a particular volume information */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_set_volume_mute</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_volume_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">mute</span><span class="p">);</span>

<span class="cm">/* Updates the audio routing according to audio route information */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_update_route</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_route_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>

<span class="cm">/* Updates audio routing option according to audio route option */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_update_route_option</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_route_option_t</span> <span class="o">*</span><span class="n">option</span><span class="p">);</span>

<span class="cm">/* Notifies when a stream is connected and disconnected */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_notify_stream_connection_changed</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="n">audio_stream_info_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">is_connected</span><span class="p">);</span>

<span class="cm">/* Opens a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_open</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">**</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">direction</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">sample_spec</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">period_size</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">periods</span><span class="p">);</span>

<span class="cm">/* Starts a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_start</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">);</span>

<span class="cm">/* Stops a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_stop</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">);</span>

<span class="cm">/* Closes a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_close</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">);</span>

<span class="cm">/* Gets the available number of frames */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_avail</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">avail</span><span class="p">);</span>

<span class="cm">/* Writes frames to a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_write</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">frames</span><span class="p">);</span>

<span class="cm">/* Reads frames from a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_read</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">frames</span><span class="p">);</span>

<span class="cm">/* Gets the poll descriptor for a PCM handle */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_get_fd</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">fd</span><span class="p">);</span>

<span class="cm">/* Recovers the PCM state */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_recover</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">revents</span><span class="p">);</span>

<span class="cm">/* Gets the parameters of a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_get_params</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">direction</span><span class="p">,</span> <span class="kt">void</span> <span class="o">**</span><span class="n">sample_spec</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">period_size</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">periods</span><span class="p">);</span>

<span class="cm">/* Sets the hardware and software parameters of a PCM device */</span>
<span class="n">audio_return_t</span> <span class="nf">audio_pcm_set_params</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">audio_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pcm_handle</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">direction</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">sample_spec</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">period_size</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">periods</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="configuration-1">Configuration</h3>

<p>To support a variety of devices, PulseAudio and device configuration have to be modified by the vendor. The following table shows the PulseAudio configuration.</p>

<p><strong>Table: PulseAudio configuration</strong></p>

<table>
  <thead>
    <tr>
      <th>Configuration</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">/etc/pulse/daemon.conf</code></td>
      <td>Configuration file for the PulseAudio daemon. In this file, the PulseAudio daemon properties, such as priority, log-level, resampling method, and default sample rate, can be modified. In Tizen, the PulseAudio daemon must be running in system mode, not user mode.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/etc/pulse/client.conf</code></td>
      <td>Configuration file for the PulseAudio clients. It is generally not necessary to modify this file.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/etc/pulse/system.pa</code></td>
      <td>PulseAudio Sound Server startup script. This startup script is used only if PulseAudio is started in system mode. Initial module loading is triggered by this file, so any vendor-specific modules to be loaded must be added here.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/etc/pulse/default.pa</code></td>
      <td>PulseAudio Sound Server startup script. This startup script is used only if PulseAudio is started in user mode. Currently Tizen does not support this mode.</td>
    </tr>
  </tbody>
</table>

<p>Stream and device configuration:</p>

<ul>
  <li>
    <p>Stream map: Latency, volume, and streams can be configured in the <code class="highlighter-rouge">/etc/pulse/stream-map.json</code> file:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"latencies"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"low"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fragsize-ms"</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span><span class="w">
            </span><span class="nl">"minreq-ms"</span><span class="p">:</span><span class="mi">-1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tlength-ms"</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="nl">"prebuf-ms"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"maxlength"</span><span class="p">:</span><span class="mi">-1</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"high"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fragsize-ms"</span><span class="p">:</span><span class="mi">75</span><span class="p">,</span><span class="w">
            </span><span class="nl">"minreq-ms"</span><span class="p">:</span><span class="mi">-1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tlength-ms"</span><span class="p">:</span><span class="mi">400</span><span class="p">,</span><span class="w">
            </span><span class="nl">"prebuf-ms"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"maxlength"</span><span class="p">:</span><span class="mi">-1</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"volumes"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"media"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-hal-volume"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"system"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-hal-volume"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"notification"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-hal-volume"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"ringtone"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-hal-volume"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"call"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-hal-volume"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"streams"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="s2">"media"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"priority"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nl">"route-type"</span><span class="p">:</span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume-types"</span><span class="p">:{</span><span class="nl">"in"</span><span class="p">:</span><span class="s2">"none"</span><span class="p">,</span><span class="nl">"out"</span><span class="p">:</span><span class="s2">"media"</span><span class="p">},</span><span class="w">
            </span><span class="nl">"avail-in-devices"</span><span class="p">:[</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="s2">"builtin-mic"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-out-devices"</span><span class="p">:[</span><span class="s2">"forwarding"</span><span class="p">,</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="s2">"bt"</span><span class="p">,</span><span class="s2">"builtin-speaker"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-frameworks"</span><span class="p">:[</span><span class="s2">"player"</span><span class="p">,</span><span class="s2">"wav-player"</span><span class="p">,</span><span class="s2">"tone-player"</span><span class="p">,</span><span class="s2">"audio-io"</span><span class="p">,</span><span class="s2">"recorder"</span><span class="p">],</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="s2">"system"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"priority"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"route-type"</span><span class="p">:</span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume-types"</span><span class="p">:{</span><span class="nl">"in"</span><span class="p">:</span><span class="s2">"none"</span><span class="p">,</span><span class="nl">"out"</span><span class="p">:</span><span class="s2">"system"</span><span class="p">},</span><span class="w">
            </span><span class="nl">"avail-in-devices"</span><span class="p">:[</span><span class="s2">"none"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-out-devices"</span><span class="p">:[</span><span class="s2">"forwarding"</span><span class="p">,</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="s2">"bt"</span><span class="p">,</span><span class="s2">"builtin-speaker"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-frameworks"</span><span class="p">:[</span><span class="s2">"player"</span><span class="p">,</span><span class="s2">"wav-player"</span><span class="p">,</span><span class="s2">"tone-player"</span><span class="p">,</span><span class="s2">"audio-io"</span><span class="p">],</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="s2">"notification"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"priority"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w">
            </span><span class="nl">"route-type"</span><span class="p">:</span><span class="s2">"auto-all"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume-types"</span><span class="p">:{</span><span class="nl">"in"</span><span class="p">:</span><span class="s2">"none"</span><span class="p">,</span><span class="nl">"out"</span><span class="p">:</span><span class="s2">"notification"</span><span class="p">},</span><span class="w">
           </span><span class="nl">"avail-in-devices"</span><span class="p">:[</span><span class="s2">"none"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-out-devices"</span><span class="p">:[</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="s2">"bt"</span><span class="p">,</span><span class="s2">"builtin-speaker"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-frameworks"</span><span class="p">:[</span><span class="s2">"player"</span><span class="p">,</span><span class="s2">"wav-player"</span><span class="p">,</span><span class="s2">"tone-player"</span><span class="p">,</span><span class="s2">"audio-io"</span><span class="p">],</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="s2">"ringtone-call"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"priority"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="nl">"route-type"</span><span class="p">:</span><span class="s2">"auto-all"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume-types"</span><span class="p">:{</span><span class="nl">"in"</span><span class="p">:</span><span class="s2">"none"</span><span class="p">,</span><span class="nl">"out"</span><span class="p">:</span><span class="s2">"ringtone"</span><span class="p">},</span><span class="w">
            </span><span class="nl">"avail-in-devices"</span><span class="p">:[</span><span class="s2">"none"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-out-devices"</span><span class="p">:[</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="s2">"bt"</span><span class="p">,</span><span class="s2">"builtin-speaker"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-frameworks"</span><span class="p">:[</span><span class="s2">"player"</span><span class="p">,</span><span class="s2">"wav-player"</span><span class="p">,</span><span class="s2">"tone-player"</span><span class="p">,</span><span class="s2">"audio-io"</span><span class="p">],</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="s2">"call-voice"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"priority"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="nl">"route-type"</span><span class="p">:</span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume-types"</span><span class="p">:{</span><span class="nl">"in"</span><span class="p">:</span><span class="s2">"none"</span><span class="p">,</span><span class="nl">"out"</span><span class="p">:</span><span class="s2">"call"</span><span class="p">},</span><span class="w">
            </span><span class="nl">"avail-in-devices"</span><span class="p">:[</span><span class="s2">"builtin-mic"</span><span class="p">,</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="s2">"bt"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-out-devices"</span><span class="p">:[</span><span class="s2">"builtin-receiver"</span><span class="p">,</span><span class="s2">"builtin-speaker"</span><span class="p">,</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="s2">"bt"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-frameworks"</span><span class="p">:[</span><span class="s2">"sound-manager"</span><span class="p">],</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>Device map: Device types and device files can be configured in the <code class="highlighter-rouge">/etc/pulse/device-map.json</code> file:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"device-types"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"device-type"</span><span class="p">:</span><span class="s2">"builtin-speaker"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"builtin"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:[</span><span class="s2">"out"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-condition"</span><span class="p">:[</span><span class="s2">"pulse"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"playback-devices"</span><span class="p">:{</span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"call-voice"</span><span class="p">:</span><span class="s2">"alsa:VIRTUALAUDIOW,0"</span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"device-type"</span><span class="p">:</span><span class="s2">"builtin-mic"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"builtin"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:[</span><span class="s2">"in"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-condition"</span><span class="p">:[</span><span class="s2">"pulse"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"capture-devices"</span><span class="p">:{</span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"device-type"</span><span class="p">:</span><span class="s2">"audio-jack"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"builtin"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:[</span><span class="s2">"both"</span><span class="p">,</span><span class="s2">"out"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-condition"</span><span class="p">:[</span><span class="s2">"pulse"</span><span class="p">,</span><span class="s2">"dbus"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"playback-devices"</span><span class="p">:{</span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"call-voice"</span><span class="p">:</span><span class="s2">"alsa:VIRTUALAUDIOW,0"</span><span class="p">},</span><span class="w">
            </span><span class="nl">"capture-devices"</span><span class="p">:{</span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"device-type"</span><span class="p">:</span><span class="s2">"bt"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"profile"</span><span class="p">:</span><span class="s2">"a2dp"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"builtin"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:[</span><span class="s2">"out"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-condition"</span><span class="p">:[</span><span class="s2">"pulse"</span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"device-type"</span><span class="p">:</span><span class="s2">"bt"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"profile"</span><span class="p">:</span><span class="s2">"sco"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"builtin"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:[</span><span class="s2">"both"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-condition"</span><span class="p">:[</span><span class="s2">"pulse"</span><span class="p">,</span><span class="s2">"dbus"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"playback-devices"</span><span class="p">:{</span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"call-voice"</span><span class="p">:</span><span class="s2">"alsa:VIRTUALAUDIOW,0"</span><span class="p">},</span><span class="w">
            </span><span class="nl">"capture-devices"</span><span class="p">:{</span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"device-type"</span><span class="p">:</span><span class="s2">"usb-audio"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"builtin"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:[</span><span class="s2">"both"</span><span class="p">,</span><span class="w"> </span><span class="s2">"in"</span><span class="p">,</span><span class="w"> </span><span class="s2">"out"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"avail-condition"</span><span class="p">:[</span><span class="s2">"pulse"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"device-files"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"playback-devices"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"device-string"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"role"</span><span class="p">:</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"rate=44100"</span><span class="p">,</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"device-string"</span><span class="p">:</span><span class="s2">"alsa:VIRTUALAUDIOW,0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"role"</span><span class="p">:</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"call-voice"</span><span class="p">:</span><span class="s2">"rate=16000 channels=1 tsched=0 alternate_rate=16000"</span><span class="p">,</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"capture-devices"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"device-string"</span><span class="p">:</span><span class="s2">"alsa:sprdphone,0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"role"</span><span class="p">:{</span><span class="nl">"normal"</span><span class="p">:</span><span class="s2">"rate=44100"</span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>

<h3 id="references-2">References</h3>

<ul>
  <li>
    <p>Driver configuration for the Samsung chipset</p>

    <p>The following list is an example of the kernel <code class="highlighter-rouge">.config</code> values to be set for audio when using the Samsung chipset.</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONFIG_SOUND=y
CONFIG_SND=y
CONFIG_SND_TIMER=y
CONFIG_SND_HWDEP=y
CONFIG_SND_JACK=y
CONFIG_SND_SOC = y
CONFIG_SND_SOC_SAMSUNG = y
CONFIG_SND_SAMSUNG_I2S = y
CONFIG_SND_SOC_SLP_TRATS_MC1N2 = y
CONFIG_SND_SOC_I2C_AND_SPI = y
CONFIG_SND_SOC_MC1N2=y
</code></pre></div>    </div>
  </li>
  <li>
    <p>PulseAudio</p>

    <p>Version: 5.0</p>

    <p>Website: <a href="http://www.freedesktop.org/wiki/Software/PulseAudio">http://www.freedesktop.org/wiki/Software/PulseAudio</a></p>
  </li>
  <li>
    <p>ALSA</p>

    <p>Website: <a href="http://www.alsa-project.org/">http://www.alsa-project.org</a></p>
  </li>
</ul>

<h2 id="player">Player</h2>

<p>The multimedia player framework controls the player plugins (demuxer, codecs, and renderer plugins) of the GStreamer to play media content. The kernel interfaces to control codecs can be different for different chipsets, so the corresponding codec plugins must be implemented specifically for each chipset.</p>

<p><strong>Figure: Multimedia player framework</strong></p>

<p><img src="media/800px-player.png" alt="Multimedia player framework" /></p>

<h3 id="porting-the-oal-interface-3">Porting the OAL Interface</h3>

<p>There is no specific OAL for the multimedia player framework. The OAL interface for the player plugins consists of the <code class="highlighter-rouge">gst-omx</code> codec plugins and video/audio renderer plugins. For more information on the <code class="highlighter-rouge">gst-omx</code> plugin, see <a href="#porting-the-oal-interface">Codec &gt; Porting OAL Interface</a>. For more information about Avsystem for audio, see <a href="#audio">Audio</a>. For more information on Wayland (UI-framework) for display, see <a href="#videosink">Video</a>.</p>

<p><strong>Figure: Player plugins</strong></p>

<p><img src="media/playerplugin.png" alt="Player plugins" /></p>

<h3 id="configuration-2">Configuration</h3>

<ul>
  <li>Configuration file:
    <ul>
      <li>The multimedia player framework uses the <code class="highlighter-rouge">mmfw_player.ini</code> configuration file to set various parameters for selecting different codecs and display plugins.</li>
      <li>The <code class="highlighter-rouge">mmfw_player.ini</code> configuration file is provided by the <code class="highlighter-rouge">mmfw-sysconf-xxx</code> package.</li>
      <li>In the final stage of development, the permission for this file needs to be changed to read-only.</li>
    </ul>
  </li>
  <li>Configuring the player:
    <ul>
      <li>File name: <code class="highlighter-rouge">mmfw_player.ini</code></li>
      <li>1 <code class="highlighter-rouge">player.ini</code> file is needed in each board (or model).</li>
      <li>Codec plugins for the board are located in the <code class="highlighter-rouge">/usr/lib/gstreamer-1.0</code> directory. Changing the codec plugin does not mean modifying this <code class="highlighter-rouge">.ini</code> file because the player supports the auto plugin feature.</li>
    </ul>
  </li>
  <li>As needed, the following setting values can be used:
    <ul>
      <li>Exclude keyword element</li>
      <li>Audio filter</li>
    </ul>
  </li>
</ul>

<h3 id="references-3">References</h3>

<ul>
  <li>
    <p>Display driver configuration for the Samsung chipset</p>

    <p>The following list is an example of the kernel <code class="highlighter-rouge">.config</code> values to be set for display in the Samsung chipset.</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONFIG_DRM = y
CONFIG_FB = y
CONFIG_FB_S3C = y
CONFIG_FB_S3C_LCD_INIT = y
CONFIG_FIMD_EXT_SUPPORT = y
CONFIG_FIMD_LITE_SUPPORT = y
</code></pre></div>    </div>
  </li>
  <li>
    <p>Kernel node</p>
    <ul>
      <li>Frame buffers: <code class="highlighter-rouge">/dev/fb(0-4)</code></li>
      <li><code class="highlighter-rouge">gst-omx</code> version : 1.2.0
        <ul>
          <li><a href="http://gstreamer.freedesktop.org/src/gst-omx/">http://gstreamer.freedesktop.org/src/gst-omx/</a></li>
          <li><a href="http://www.freedesktop.org/wiki/GstOpenMAX">http://www.freedesktop.org/wiki/GstOpenMAX</a></li>
        </ul>
      </li>
      <li>For all GStreamer documentation, see <a href="http://gstreamer.freedesktop.org/documentation/">http://gstreamer.freedesktop.org/documentation/</a>.</li>
      <li>For developing GStreamer plugins, see <a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/index.html">http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/index.html</a>.</li>
      <li>For more information about OpenMAX IL components, see <a href="http://www.khronos.org/openmax/il/">http://www.khronos.org/openmax/il/</a>.</li>
    </ul>
  </li>
</ul>

<h2 id="codec">Codec</h2>

<p>The following figure illustrates the codecs and their relations. It shows 2 types of codec plugins, the Gstreamer and OpenMAX.</p>

<p><strong>Figure: Multimedia codecs</strong></p>

<p><img src="media/800px-codec.png" alt="Multimedia codecs" /></p>

<ul>
  <li>
    <p>Gstreamer codec plugin</p>

    <ul>
      <li>The Gstreamer codec plugin can be linked to and easily used in the Gstreamer pipeline, which is used in the multimedia framework.</li>
      <li>In addition, to link a Gstreamer pipeline, the capability of the codec plugin can be negotiated with the linked element in the pipeline.</li>
      <li>
        <p>To get detailed information, such as the capability of an element, use the <code class="highlighter-rouge">#gst-inspect-1.0 (element name)</code> command.</p>

        <p><img src="media/gst-inspect.png" alt="Gst-inspect command" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>OpenMAX codec plugin</p>
    <ul>
      <li>Some of the codec vendors provide OpenMAX IL components and not Gstreamer plugins. Tizen provides the <code class="highlighter-rouge">gst-omx</code> plugins to use the OpenMAX IL components. The Gstreamer pipeline used in the multimedia framework can control and transfer data to OpenMAX IL component using the <code class="highlighter-rouge">gst-omx</code> plugin.</li>
      <li>To use the OpenMAX component in Gstreamer, the <code class="highlighter-rouge">gst-omx</code> (open source) package is provided. By using this package, Gstreamer can recognize and use an OpenMAX component as a Gstreamer element. <code class="highlighter-rouge">gst-omx</code> is a Gstreamer plugin that allows communication with OpenMAX IL components. The usage of the <code class="highlighter-rouge">gst-omx</code> plugin is the same as other Gstreamer plugins.</li>
      <li>For more detailed information about this plugin, see <a href="http://www.freedesktop.org/wiki/GstOpenMAX">http://www.freedesktop.org/wiki/GstOpenMAX</a>. For more information about OpenMAX IL, see <a href="http://www.khronos.org/openmax/">http://www.khronos.org/openmax/</a>.</li>
      <li>The <code class="highlighter-rouge">gst-omx</code> plugin refers to a <code class="highlighter-rouge">gstomx.conf</code> configuration file. This file is included in the <code class="highlighter-rouge">gst-omx</code> package, and installed to the <code class="highlighter-rouge">/etc/xdg/gst-omx.conf</code> directory in the target device.</li>
    </ul>
  </li>
</ul>

<h3 id="porting-the-oal-interface-4">Porting the OAL Interface</h3>

<p>The OpenMAX plugin is an industry standard that provides an abstraction layer for computer graphics, video, and sound routines. The interface abstracts the hardware and software architecture in the system. The OpenMAX IL API allows the user to load, control, connect, and unload the individual components. This flexible core architecture allows the Integration Layer to easily implement almost any media use case and mesh with existing graph-based media frameworks. The key focus of the OpenMAX IL API is portability of media components. OpenMAX IL interfaces between the media framework, such as GStreamer, and a set of multimedia components (such as an audio or video codecs). <code class="highlighter-rouge">gst-omx</code> is a GStreamer plug-in package that allows communication with OpenMAX IL components. The <code class="highlighter-rouge">gst-omx</code> structuring is classified into different object classes based on the functionality. The following figure shows the object structuring of a video decoder plugin in <code class="highlighter-rouge">gst-omx</code>.</p>

<p><strong>Figure: gst-omx structuring</strong></p>

<p><img src="media/gst-omx.png" alt="gst-omx structuring" /></p>

<p>The <code class="highlighter-rouge">GstVideoDecoder</code> base class for video decoders provides encoded data to derived <code class="highlighter-rouge">GstOMXVideoDec</code>. Each input frame is provided in turn to the subclass’s <code class="highlighter-rouge">handle_frame</code> callback. The <code class="highlighter-rouge">GstVideoDecoder</code> base class and derived subclass cooperate in the following manner:</p>

<ol>
  <li>Configuration
    <ul>
      <li><code class="highlighter-rouge">GstVideoDecoder</code> calls the <code class="highlighter-rouge">start()</code> function when the decoder element is activated.</li>
      <li><code class="highlighter-rouge">GstVideoDecoder</code> calls the <code class="highlighter-rouge">set_format()</code> function to inform the subclass of caps describing the input video data.</li>
    </ul>
  </li>
  <li>Data processing
    <ul>
      <li>Each input frame is provided in turn to the subclass’s <code class="highlighter-rouge">handle_frames()</code> function.</li>
      <li>The subclass calls the <code class="highlighter-rouge">gst_video_decoder_finish_frame()</code> or <code class="highlighter-rouge">gst_video_decoder_drop_frame()</code> function.</li>
    </ul>
  </li>
  <li>Shutdown phase
    <ul>
      <li>The <code class="highlighter-rouge">GstVideoDecoder</code> class calls the <code class="highlighter-rouge">stop()</code> function.</li>
    </ul>
  </li>
</ol>

<h3 id="configuration-3">Configuration</h3>

<p>The <code class="highlighter-rouge">gst-omx</code> plugin uses a configuration file, such as <code class="highlighter-rouge">gstomx.conf</code>. This file is included in the <code class="highlighter-rouge">gst-omx</code> package, and installed in the <code class="highlighter-rouge">/etc/xdg/gstomx.conf</code> directory on the target device. The <code class="highlighter-rouge">gstomx.conf</code> file needs to be changed according to the OpenMAX component vendor. The following figures lists the values of each item in the lists separated by commas. Each Gstreamer element is separated by a semicolon.</p>

<p><strong>Figure: gstomx.conf elements</strong></p>

<p><img src="media/gst-openmax.conf.png" alt="gstomx.conf elements" /></p>

<p><strong>Figure: gstomx.conf example</strong></p>

<p><img src="media/omx-mpeg4dec.png" alt="gstomx.conf example" /></p>

<p>Each value needs to be changed according to the OpenMAX component vendor. When you are finished with these settings, the result is a Gstreamer type codec plugin, and you can test the codec the same way.</p>

<ul>
  <li>
    <p>Using the codec plugin in the player</p>

    <p>Because the player uses auto plugging, it does not need an additional setting.</p>

    <ul>
      <li>If the decoder plugin has an acceptable capability, this plugin can be linked with a player pipeline in order of rank.</li>
      <li>If the codec name is included in the excluded keyword in the <code class="highlighter-rouge">/usr/etc/mmfw_player.ini</code> file (<code class="highlighter-rouge">mmfw-sysconf</code> package), it is excluded in the player pipeline.</li>
    </ul>
  </li>
  <li>
    <p>Using the codec plugin in the camcorder</p>

    <p>Because the camcorder clarified its audio, video, and image encoder in the <code class="highlighter-rouge">/usr/etc/mmfw_camcorder.ini</code> file (<code class="highlighter-rouge">mmfw-sysconf</code> package), you need to change this category value to set your own codec name.</p>

    <p><img src="media/videoencoder.png" alt="Video encoder configuration" /></p>
  </li>
</ul>

<h3 id="references-4">References</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">gst-omx</code> version: 1.2</p>

    <p><a href="http://gstreamer.freedesktop.org/src/gst-omx/">http://gstreamer.freedesktop.org/src/gst-omx/</a></p>

    <p><a href="http://www.freedesktop.org/wiki/GstOpenMAX">http://www.freedesktop.org/wiki/GstOpenMAX</a></p>
  </li>
  <li>
    <p>For all GStreamer documentation, see <a href="http://gstreamer.freedesktop.org/documentation/">http://gstreamer.freedesktop.org/documentation/</a>.</p>
  </li>
  <li>
    <p>For developing GStreamer plug-ins, see <a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/index.html">http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/index.html</a>.</p>
  </li>
  <li>
    <p>For more information about OpenMAX IL components, see <a href="http://www.khronos.org/openmax/il/">http://www.khronos.org/openmax/il/</a>.</p>
  </li>
</ul>

<h2 id="videosink">Videosink</h2>

<p>The videosink renders a video frame buffer from a previous gst element on a local display using Waylandsink (since Tizen 3.0). It is used with a camera or player that requires video output. This element can receive a surface ID of a window from the application through the <code class="highlighter-rouge">GstVideoOverlay</code> interface (<code class="highlighter-rouge">set_wl_window_wl_surface_id()</code>) and renders the video frame in this window. If no surface ID was provided by the application, the element creates its own internal window and renders into it.</p>

<p>The following figure shows the video rendering process in the player. The white box is the gstreamer element. GstBuffer is streaming from filesrc to Waylandsink past the video codec. The GstBuffer is TBM or SHM.</p>

<p><strong>Figure: Video rendering process</strong></p>

<p><img src="media/video-rendering-process.png" alt="Video rendering process" /></p>

<ol>
  <li>Waylandsink requests the rendering of the video frame to the <code class="highlighter-rouge">wl_surface</code> of a window, so Waylandsink needs the <code class="highlighter-rouge">wl_surface</code> of a Wayland window created by the application. Because the application and Muse are in different process bounds, the application cannot pass the <code class="highlighter-rouge">wl_surface</code> pointer to Muse. To solve this problem, Tizen uses the surface ID value.</li>
  <li>The application sends a <code class="highlighter-rouge">wl_surface</code> pointer to the Window Server, which returns the global surface ID to the application, which in turn passes this value to Waylandsink using the <code class="highlighter-rouge">GstVideoOverlay</code> interface, <code class="highlighter-rouge">set_wl_window_wl_surface_id()</code> (Tizen-specific). <strong>Steps 1, 2, and 3 in the figure.</strong></li>
  <li>Waylandsink creates <code class="highlighter-rouge">wl_display</code> to communicate with the Window Server. Normally a Window client uses the <code class="highlighter-rouge">wl_display</code> created by the application, but the Tizen Waylandsink creates its own <code class="highlighter-rouge">wl_display</code> due to process bounds issues. <strong>Step 4.</strong> Now Waylandsink can receive events from the server and bind to various interfaces using <code class="highlighter-rouge">wl_registry</code>.</li>
  <li>Waylandsink uses <code class="highlighter-rouge">wl_display</code> to create <code class="highlighter-rouge">wl_window</code> and a <code class="highlighter-rouge">wl_subsurface</code> using the global surface ID passed through the <code class="highlighter-rouge">GstVideoOverlay</code> interface. <code class="highlighter-rouge">wl_surface</code> is created by the <code class="highlighter-rouge">wl_compositor</code> of <code class="highlighter-rouge">wl_display</code>. <strong>Step 5.</strong></li>
  <li>The application can use the Waylandsink properties to change video rendering conditions through <code class="highlighter-rouge">wl_subsurface</code>. <strong>Step 6.</strong></li>
  <li>The <code class="highlighter-rouge">GstBuffer</code> received from the video codec is converted into a <code class="highlighter-rouge">wl_buffer</code>, then the <code class="highlighter-rouge">wl_surface</code> of <code class="highlighter-rouge">wl_window</code> is requested to render the video frame to the Window Server through the attach, damage, and commit process. <strong>Steps 7 and 8.</strong> The Window Server renders the <code class="highlighter-rouge">wl_buffer</code>. <strong>Step 9.</strong></li>
  <li>When the Window Server finishes rendering the video frame, the rendering complete signal is sent to the <code class="highlighter-rouge">wl_callback</code> of <code class="highlighter-rouge">wl_window</code>, and the <code class="highlighter-rouge">wl_buffer</code> release event is sent to the <code class="highlighter-rouge">wl_buffer_listener</code> callback function. <strong>Steps 10 and 11.</strong> Now, Waylandsink can unreference the <code class="highlighter-rouge">GstBuffer</code> created by the video codec and return the <code class="highlighter-rouge">GstBuffer</code> to the video codec. Sometimes, it is necessary to return a <code class="highlighter-rouge">GstBuffer</code> while maintaining the rendered video frame in the window (for gapless playback, or keeping a camera preview). In this case, use <code class="highlighter-rouge">FlushBuffer</code>, which is a <code class="highlighter-rouge">wl_buffer</code> created after copying TBM from <code class="highlighter-rouge">GstBuffer</code> coming from the video codec. Waylandsink returns the <code class="highlighter-rouge">GstBuffer</code> to the video codec immediately, and a request to render the <code class="highlighter-rouge">FlushBuffer</code> is made to the Window Server.</li>
</ol>

<p>For more information on Wayland, see <a href="https://wayland.freedesktop.org/">https://wayland.freedesktop.org/</a>.  For more information on programming the Wayland client, see <a href="https://jan.newmarch.name/Wayland/index.html">Programming Wayland Clients</a>.</p>

<h3 id="porting-the-oal-interface-5">Porting the OAL Interface</h3>
<p>There is no specific OAL for the videosink.</p>

<h3 id="tizen-specific-features-added-to-waylandsink">Tizen-specific Features Added to Waylandsink</h3>

<p>You can check the original waylandsink behavior easily with Waylandsink’s video rendering test. Simply connect to videotestsrc through gst-launch. If the video test screen does not appear, the Window system <a href="graphics-and-ui.md#display-management">must be ported first</a>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gst-launch-1.0 videotestsrc ! waylandsink
</code></pre></div></div>
<p><strong>Figure: Video test screen</strong></p>

<p><img src="media/videotest.png" alt="Video test screen" /></p>

<h4 id="waylandsink-requirements-for-tizen">Waylandsink Requirements for Tizen</h4>

<p>Open source Waylandsink uses <code class="highlighter-rouge">wayland-client</code>, but Waylandsink for Tizen uses <code class="highlighter-rouge">libtbm</code>, <code class="highlighter-rouge">wayland-tbm-client</code>, and <code class="highlighter-rouge">tizen-extension-client</code> to support MMFW’s API requirements and uses Window Server extended functionality.</p>

<p>The major functions are TBM Video Format, Specific Video Formats, Zero copy, MMVideoBuffer, Tizen Viewport, Flush Buffer, Audio only mode, Handoffs Element signals, preroll-handoff Element signals, Use TBM, Rotate, Flip, Visible, Display Geometry Method, and ROI.</p>

<p><strong>TBM Video Format</strong></p>

<p>Original Waylandsink lists various video formats, but Wayland only supports the RGB format. To support various video formats, Waylandsink for Tizen uses the TBM Video Format provided by Wayland for Tizen. The video formats supported by the Window Server are hardware-dependent. The dependency is on the Window Server. When the Gst-pipeline with Waylandsink is created and the caps negotiation begins, the TBM video format provided by the Window Server is passed to Waylandsink. The Window Server can accommodate the video output format of the video codec when the negotiation is completed.</p>

<p>To use the TBM Video Format, Waylandsink needs to bind <code class="highlighter-rouge">tizen_policy_interface</code>, <code class="highlighter-rouge">tizen_video_interface</code>, and <code class="highlighter-rouge">register listener</code> and get the video formats as a callback.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="kt">void</span> <span class="nf">handle_tizen_video_format</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="k">struct</span> <span class="n">tizen_video</span> <span class="o">*</span><span class="n">tizen_video</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">format</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GstWlDisplay</span> <span class="o">*</span><span class="n">self</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
    <span class="n">FUNCTION</span><span class="p">;</span>

    <span class="n">g_return_if_fail</span><span class="p">(</span><span class="n">self</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="n">GST_LOG</span><span class="p">(</span><span class="s">"format is %d"</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
    <span class="n">g_array_append_val</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">tbm_formats</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">tizen_video_listener</span> <span class="n">tizen_video_listener</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">handle_tizen_video_format</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">global_registry_handler</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="k">struct</span> <span class="n">wl_registry</span> <span class="o">*</span><span class="n">registry</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">id</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">version</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[...]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">g_strcmp0</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="s">"tizen_policy"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">self</span><span class="o">-&gt;</span><span class="n">tizen_policy</span> <span class="o">=</span> <span class="n">wl_registry_bind</span><span class="p">(</span><span class="n">registry</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tizen_policy_interface</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">g_strcmp0</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="s">"tizen_video"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">self</span><span class="o">-&gt;</span><span class="n">tizen_video</span> <span class="o">=</span> <span class="n">wl_registry_bind</span><span class="p">(</span><span class="n">registry</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tizen_video_interface</span><span class="p">,</span> <span class="n">version</span><span class="p">);</span>
        <span class="n">g_return_if_fail</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">tizen_video</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
        <span class="n">tizen_video_add_listener</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">tizen_video</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tizen_video_listener</span><span class="p">,</span> <span class="n">self</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">[...]</span>
<span class="err">}</span>
</code></pre></div></div>

<p><strong>Specific Video Formats (SN12, SN21, ST12, SR32, S420) for Zero copy</strong></p>

<p>The SN12, SN21, ST12, SR32, and S320 formats are identical to NV12, NV21, NV12MT, BGRA, and I420, but the Multimedia framework uses these specific video formats to indicate that the formats are using a TBM buffer. Tizen provides a TBM buffer to avoid memory copying when transferring the buffer to different processes. <code class="highlighter-rouge">Camerasrc</code> or the video codec writes the video data to the TBM buffer, saves it to a pointer to <code class="highlighter-rouge">GstBuffer</code>, and sends it to Waylandsink. Waylandsink creates a <code class="highlighter-rouge">wl_buffer</code> with <code class="highlighter-rouge">tbm_bo</code> and requests rendering from the Window Server. There is no memory copy from <code class="highlighter-rouge">Camerasrc</code> or the video codec to the Window Server. This process is called Zero Copy.</p>

<p><strong>MMVideoBuffer</strong></p>

<p>The Gst Element must use the MMVideoBuffer type when transferring TBM buffer. tbm bo must be stored in bo of MMVideoBufferHandle, and the type must be MM_VIDEO_BUFFER_TYPE_TBM_BO. Waylandsink makes wl_buffer by using the MMVideoBuffer information. If the video frame is not rendered, Waylandsink must make sure that the information in MMVideoBuffer in GstBuffer received from Camerasrc or Video Codec is correct.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">MMVideoBufferType</span> <span class="n">type</span><span class="p">;</span> <span class="cm">/* Buffer type - the handle field that type indicates must be filled, and other handle fields are optional */</span>
    <span class="n">MMPixelFormatType</span> <span class="n">format</span><span class="p">;</span> <span class="cm">/* Buffer type */</span>
    <span class="kt">int</span> <span class="n">plane_num</span><span class="p">;</span> <span class="cm">/* Number of planes */</span>
    <span class="kt">int</span> <span class="n">width</span><span class="p">[</span><span class="n">MM_VIDEO_BUFFER_PLANE_MAX</span><span class="p">]</span> <span class="cm">/* Width of buffer */</span>
    <span class="kt">int</span> <span class="n">height</span><span class="p">[</span><span class="n">MM_VIDEO_BUFFER_PLANE_MAX</span><span class="p">];</span> <span class="cm">/* Height of buffer */</span>
    <span class="kt">int</span> <span class="n">stride_width</span><span class="p">[</span><span class="n">MM_VIDEO_BUFFER_PLANE_MAX</span><span class="p">];</span> <span class="cm">/* Stride width of buffer */</span>
    <span class="kt">int</span> <span class="n">stride_height</span><span class="p">[</span><span class="n">MM_VIDEO_BUFFER_PLANE_MAX</span><span class="p">];</span> <span class="cm">/* Stride height of buffer */</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">[</span><span class="n">MM_VIDEO_BUFFER_PLANE_MAX</span><span class="p">];</span> <span class="cm">/* Size of planes */</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">[</span><span class="n">MM_VIDEO_BUFFER_PLANE_MAX</span><span class="p">];</span> <span class="cm">/* Data pointer(user address) of planes */</span>
    <span class="kt">int</span> <span class="n">handle_num</span><span class="p">;</span> <span class="cm">/* Number of buffer handle */</span>
    <span class="kt">int</span> <span class="n">handle_size</span><span class="p">[</span><span class="n">MM_VIDEO_BUFFER_PLANE_MAX</span><span class="p">];</span> <span class="cm">/* Size of handles */</span>
    <span class="n">MMVideoBufferHandle</span> <span class="n">handle</span><span class="p">;</span> <span class="cm">/* Handle of buffer */</span>
    <span class="kt">int</span> <span class="n">is_secured</span><span class="p">;</span> <span class="cm">/* Secured buffer flag, such as TrustZone memory; user cannot access it */</span>
    <span class="kt">int</span> <span class="n">flush_request</span><span class="p">;</span> <span class="cm">/* Flush request flag - if this flag is TRUE, sink element makes copy of last buffer, and it returns all buffers from src element. Then, src element can restart without changing pipeline state */</span>
    <span class="n">MMRectType</span> <span class="n">crop</span><span class="p">;</span> <span class="cm">/* Crop information of buffer */</span>
<span class="p">}</span> <span class="n">MMVideoBuffer</span><span class="p">;</span>
</code></pre></div></div>
<p>MMVideoBuffer can contain video data information of all cases, as shown in the following figure.</p>

<p><strong>Figure: MMVideoBuffer content</strong></p>

<p><img src="media/yuv-block.png" alt="MMVideoBuffer content" /></p>

<h5 id="tizen-viewport">Tizen Viewport</h5>

<p>To change the video frame render condition, the original open-source Waylandsink uses <code class="highlighter-rouge">wlsurface_set_source()</code>, <code class="highlighter-rouge">wl_surface_set_buffer_transform()</code>, <code class="highlighter-rouge">wl_subsurface_set_position()</code>, <code class="highlighter-rouge">wl_viewport_set_destination()</code>, and <code class="highlighter-rouge">wl_surface_set_buffer_transform()</code> functions. For more information on the Wayland API, see <a href="https://wayland.freedesktop.org/docs/html/">https://wayland.freedesktop.org/docs/html/</a>. Waylandsink needs to IPC with <code class="highlighter-rouge">wl_surface</code>, <code class="highlighter-rouge">wl_subsurface</code>, and <code class="highlighter-rouge">wl_viewport</code>.</p>

<p><strong>Figure: Changing video frame render conditions</strong></p>

<p><img src="media/wl-surface.png" alt="Changing video frame render conditions" /></p>

<p><strong>Figure: Wayland protocols</strong></p>

<p><img src="media/wayland-protocols.png" alt="Wayland protocols" /></p>

<p>Waylandsink in the Muse Daemon requests rendering conditions on the <code class="highlighter-rouge">wl_subsurface</code> of the window created by the application. Therefore, it is difficult to match the geometry sync of the parent (Window) and <code class="highlighter-rouge">wl_subsurface</code>, due to the delay caused by the IPC communication between the Window Server and Wayland client. Since <code class="highlighter-rouge">wl_viewport_</code> and <code class="highlighter-rouge">wl_set_source_</code> are surface-based coordination, it is difficult to calculate the coordinates when the buffer is transformed. So Waylandsink for Tizen uses <code class="highlighter-rouge">tizen_viewport supported</code> Wayland Server for Tizen. To use <code class="highlighter-rouge">tizen_viewport</code>, Waylandsink binds <code class="highlighter-rouge">tizen_policy_interface</code> and <code class="highlighter-rouge">tizen_video_interface</code>. Now, Waylandsink only needs to IPC <code class="highlighter-rouge">tizen_viewport</code>.</p>

<p><strong>Figure: Tizen viewport</strong></p>

<p><img src="media/tizen-viewport.png" alt="Tizen viewport" /></p>

<ul>
  <li>
    <p>Example 1:</p>

    <p><img src="media/tizen-viewport-ex1.png" alt="Viewport example 1" /></p>
  </li>
  <li>
    <p>Example 2:</p>

    <p><img src="media/tizen-viewport-ex2.png" alt="Viewport example 2" /></p>
  </li>
  <li>
    <p>Example 3:</p>

    <p><img src="media/tizen-viewport-ex3.png" alt="Viewport example 3" /></p>
  </li>
  <li>
    <p>Example 4:</p>

    <p><img src="media/tizen-viewport-ex4.png" alt="Viewport example 4" /></p>
  </li>
</ul>

<p><strong>Flush buffer</strong></p>

<p>Sometimes, it is necessary to return <code class="highlighter-rouge">GstBuffer</code> while maintaining the video frame rendered in the window. In this case, use <code class="highlighter-rouge">FlushBuffer</code>, which is a <code class="highlighter-rouge">wl_buffer</code> created after copying TBM from <code class="highlighter-rouge">GstBuffer</code> coming from the video codec or <code class="highlighter-rouge">Camerasrc</code>. Waylandsink returns the <code class="highlighter-rouge">GstBuffer</code> to the video codec or <code class="highlighter-rouge">Camerasrc</code> immediately, and a request to render the <code class="highlighter-rouge">FlushBuffer</code> is made to the Window Server.</p>

<ol>
  <li>
    <p>Gapless video playback</p>

    <p>Waylandsink receives the <code class="highlighter-rouge">GST_EVENT_CUSTOM_DOWNSTREAM</code> event from the player when it performs gapless video playback. The player creates a <code class="highlighter-rouge">FlushBuffer</code>.</p>

    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define GST_APP_EVENT_FLUSH_BUFFER_NAME "application/flush-buffer"
</span>
<span class="k">static</span> <span class="n">gboolean</span> <span class="nf">gst_wayland_sink_event</span><span class="p">(</span><span class="n">GstBaseSink</span> <span class="o">*</span> <span class="n">bsink</span><span class="p">,</span> <span class="n">GstEvent</span> <span class="o">*</span> <span class="n">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[...]</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">GST_EVENT_TYPE</span><span class="p">(</span><span class="n">event</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">GST_EVENT_CUSTOM_DOWNSTREAM</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">gst_event_get_structure</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="o">!</span><span class="n">gst_structure_has_name</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">GST_APP_EVENT_FLUSH_BUFFER_NAME</span><span class="p">))</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="n">gst_wayland_sink_render_flush_buffer</span><span class="p">(</span><span class="n">bsink</span><span class="p">);</span>
    <span class="p">[...]</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">keep-camera-preview</code></p>

    <p>The camera sets this property when it needs to maintain the last video frame. Waylandsink copies the last TBM buffer and returns it immediately when the state changes (PAUSED_TO_READY).</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>keep-camera-preview : Last tbm buffer is copied and returned to camerasrc immediately when state change(PAUSED_TO_READY)
                      flags: readable, writable
                      Boolean. Default: false
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">flush_request</code> of MMVideoBuffer</p>

    <p><code class="highlighter-rouge">Camerasrc</code> and the video codec can set a flag to request a flushbuffer in the <code class="highlighter-rouge">GstBuffer</code> using <code class="highlighter-rouge">MMVideoBuffer.flush_request = TRUE</code>.</p>
  </li>
</ol>

<p><strong>Audio only mode</strong></p>

<p>Waylandsink has a <code class="highlighter-rouge">disable-overlay</code> property to support the player’s audio-only mode. If this property is set, the video frame is not rendered. When the player needs to show a video frame, it needs to set this property to <code class="highlighter-rouge">false</code> and set <code class="highlighter-rouge">wl_surface_id</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>disable-overlay : Stop using overlay by destroying wl_window and wl_display, Use gst_video_overlay_set_wl_window_wl_surface_id before setting FALSE to use overlay
                              flags: readable, writable
                              Boolean. Default: false
</code></pre></div></div>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gst_wayland_sink_set_property</span><span class="p">(</span><span class="n">GObject</span> <span class="o">*</span> <span class="n">object</span><span class="p">,</span> <span class="n">guint</span> <span class="n">prop_id</span><span class="p">,</span> <span class="k">const</span> <span class="n">GValue</span> <span class="o">*</span> <span class="n">value</span><span class="p">,</span> <span class="n">GParamSpec</span> <span class="o">*</span> <span class="n">pspec</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[...]</span>
    <span class="k">case</span> <span class="n">PROP_DISABLE_OVERLAY</span><span class="p">:</span>
       <span class="n">sink</span><span class="o">-&gt;</span><span class="n">disable_overlay</span> <span class="o">=</span> <span class="n">g_value_get_boolean</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">sink</span><span class="o">-&gt;</span><span class="n">window</span> <span class="o">&amp;&amp;</span> <span class="n">sink</span><span class="o">-&gt;</span><span class="n">display</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">sink</span><span class="o">-&gt;</span><span class="n">disable_overlay</span><span class="p">)</span> <span class="p">{</span>   <span class="cm">/* set TRUE */</span>
           <span class="n">g_clear_object</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sink</span><span class="o">-&gt;</span><span class="n">window</span><span class="p">);</span>
           <span class="n">g_clear_object</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sink</span><span class="o">-&gt;</span><span class="n">display</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="cm">/* set FALSE */</span>
          <span class="n">gst_wayland_sink_recover_display_window_info</span><span class="p">(</span><span class="n">sink</span><span class="p">);</span>
       <span class="p">}</span>
       <span class="k">break</span><span class="p">;</span>
    <span class="p">[...]</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">GstFlowReturn</span> <span class="nf">gst_wayland_sink_render</span><span class="p">(</span><span class="n">GstBaseSink</span> <span class="o">*</span> <span class="n">bsink</span><span class="p">,</span> <span class="n">GstBuffer</span> <span class="o">*</span> <span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[...]</span>
    <span class="cm">/* check overlay */</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">gst_wayland_sink_is_disabled_overlay</span><span class="p">(</span><span class="n">sink</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">GST_LOG</span><span class="p">(</span><span class="s">"set disable_overlay, so skip"</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">done</span><span class="p">;</span> <span class="c1">//skip video rendering</span>
    <span class="p">}</span>
    <span class="p">[...]</span>
<span class="p">}</span>

<span class="n">Refer</span> <span class="n">to</span> <span class="n">mm_player_priv</span><span class="p">.</span><span class="n">c</span>
<span class="cm">/* Need to set surface_id to enable overlay */</span>
<span class="n">gst_video_overlay_set_wl_window_wl_surface_id</span><span class="p">(</span><span class="n">GST_VIDEO_OVERLAY</span><span class="p">(</span><span class="n">player</span><span class="o">-&gt;</span><span class="n">pipeline</span><span class="o">-&gt;</span><span class="n">videobin</span><span class="p">[</span><span class="n">MMPLAYER_V_SINK</span><span class="p">].</span><span class="n">gst</span><span class="p">),</span> <span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">handle</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>Handoffs and preroll-handoff element signals</strong></p>

<p>Changing the gst-pipeline of the player is labor-intensive, so Waylandsink provides a fakesink functionality. If this property is set to <code class="highlighter-rouge">true</code>, Waylandsink sends a handoff signal to the player.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">GstFlowReturn</span> <span class="nf">gst_wayland_sink_render</span><span class="p">(</span><span class="n">GstBaseSink</span> <span class="o">*</span> <span class="n">bsink</span><span class="p">,</span> <span class="n">GstBuffer</span> <span class="o">*</span> <span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[...]</span>
    <span class="cm">/* fakesink function for media stream callback case */</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sink</span><span class="o">-&gt;</span><span class="n">signal_handoffs</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">GST_LOG</span><span class="p">(</span><span class="s">"g_signal_emit: hand-off "</span><span class="p">);</span>
        <span class="n">g_signal_emit</span><span class="p">(</span><span class="n">sink</span><span class="p">,</span> <span class="n">gst_waylandsink_signals</span><span class="p">[</span><span class="n">SIGNAL_HANDOFF</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">bsink</span><span class="o">-&gt;</span><span class="n">sinkpad</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">done</span><span class="p">;</span>  <span class="cm">/* Skip video rendering */</span>
    <span class="p">}</span>
    <span class="p">[...]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Use TBM</strong></p>

<p>Waylandsink use 2 types of buffers, shared memory and TBM memory. The default value of the <code class="highlighter-rouge">use-tbm</code> property is <code class="highlighter-rouge">true</code> and Waylandsink uses TBM memory. If the value is <code class="highlighter-rouge">false</code>, Waylandsink for Tizen uses shared memory just like the original open-source Waylandsink.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>use-tbm  : Use Tizen Buffer Memory instead of Shared memory, Memory is allocated by TBM instead of SHM when enabled
           flags: readable, writable
           Boolean. Default: true
</code></pre></div></div>

<p><strong>Rotate</strong></p>

<p>Waylandsink can rotate the angle of display output. The default value of the <code class="highlighter-rouge">rotate</code> property is 0, “DEGREE_0”.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rotate   : Rotate angle of display output
           flags: readable, writable
           Enum "GstWaylandSinkRotateAngleType" Default: 0, "DEGREE_0"
                (0): DEGREE_0         - No rotate
                (1): DEGREE_90        - Rotate 90 degree
                (2): DEGREE_180       - Rotate 180 degree
                (3): DEGREE_270       - Rotate 270 degree
</code></pre></div></div>

<p>The enumeration values used by the player or camera need to be converted to values used by Wayland.</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">gint</span> <span class="nf">gst_wl_window_find_rotate_transform</span><span class="p">(</span><span class="n">guint</span> <span class="n">rotate_angle</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">gint</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_NORMAL</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">rotate_angle</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">DEGREE_0</span><span class="p">:</span>
         <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_NORMAL</span><span class="p">;</span>
         <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">DEGREE_90</span><span class="p">:</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_90</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">DEGREE_180</span><span class="p">:</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_180</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">DEGREE_270</span><span class="p">:</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_270</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">transform</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">transform</span> <span class="o">=</span>  <span class="n">gst_wl_window_find_rotate_transform</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rotate_angle</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
<span class="n">tizen_viewport_set_transform</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">tizen_area_viewport</span><span class="p">,</span> <span class="n">transform</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>Flip</strong></p>

<p>Waylandsink can flip the angle of the display output. The default value of the <code class="highlighter-rouge">flip</code> property is 0, “FLIP_NONE”.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> flip  : Flip for display
         flags: readable, writable
         Enum "GstWaylandSinkFlipType" Default: 0, "FLIP_NONE"
              (0): FLIP_NONE        - Flip NONE
              (1): FLIP_HORIZONTAL  - Flip HORIZONTAL
              (2): FLIP_VERTICAL    - Flip VERTICAL
              (3): FLIP_BOTH        - Flip BOTH
</code></pre></div></div>

<p>Wayland has no flip function, so Waylandsink must implement flipping by rotating the video viewport:</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">gint</span> <span class="nf">gst_wl_window_find_flip_transform</span><span class="p">(</span><span class="n">guint</span> <span class="n">flip</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">gint</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_NORMAL</span><span class="p">;</span>
    <span class="n">FUNCTION</span><span class="p">;</span>

    <span class="n">GST_DEBUG</span><span class="p">(</span><span class="s">"flip (%d)"</span><span class="p">,</span> <span class="n">flip</span><span class="p">);</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">flip</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">FLIP_NONE</span><span class="p">:</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_NORMAL</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">FLIP_HORIZONTAL</span><span class="p">:</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_FLIPPED</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">FLIP_VERTICAL</span><span class="p">:</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_FLIPPED_180</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">FLIP_BOTH</span><span class="p">:</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">WL_OUTPUT_TRANSFORM_180</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">transform</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">transform</span> <span class="o">=</span> <span class="n">gst_wl_window_find_flip_transform</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">flip</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
<span class="n">tizen_viewport_set_transform</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">tizen_video_viewport</span><span class="p">,</span> <span class="n">transform</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>Visible</strong></p>

<p>Waylandsink can make the video frame visible or invisible on the display. To make the video frame invisible, attach <code class="highlighter-rouge">NULL</code>. To make the video fame visible, Waylandsink needs to keep the last rendered video frame.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* invisible */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">gst_wayland_sink_stop_video</span><span class="p">(</span><span class="n">GstWaylandSink</span> <span class="o">*</span> <span class="n">sink</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">FUNCTION</span><span class="p">;</span>
    <span class="n">g_return_if_fail</span><span class="p">(</span><span class="n">sink</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">gst_wl_window_render</span><span class="p">(</span><span class="n">sink</span><span class="o">-&gt;</span><span class="n">window</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>
<span class="cm">/* visible */</span>
<span class="n">gst_wayland_sink_update_last_buffer_geometry</span><span class="p">(</span><span class="n">sink</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>Display geometry method and ROI</strong></p>

<p>When rendering video, Waylandsink can change the geometry.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>display-geometry-method: Geometrical method for display
           flags: readable, writable
           Enum "GstWaylandSinkDisplayGeometryMethodType" Default: 0, "LETTER_BOX"
                (0): LETTER_BOX       - Letter box
                (1): ORIGIN_SIZE      - Origin size
                (2): FULL_SCREEN      - Full-screen
                (3): CROPPED_FULL_SCREEN - Cropped full-screen
                (4): ORIGIN_SIZE_OR_LETTER_BOX - Origin size(if screen size is larger than video size(width/height)) or Letter box(if video size(width/height) is larger than screen size)
                (5): DISP_GEO_METHOD_CUSTOM_ROI - Specially described destination ROI
</code></pre></div></div>
<p>These are provided by using <code class="highlighter-rouge">tizen_viewport</code> since Tizen 3.0.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">enum</span> <span class="p">{</span>
    <span class="n">DISP_GEO_METHOD_LETTER_BOX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">DISP_GEO_METHOD_ORIGIN_SIZE</span><span class="p">,</span>
    <span class="n">DISP_GEO_METHOD_FULL_SCREEN</span><span class="p">,</span>
    <span class="n">DISP_GEO_METHOD_CROPPED_FULL_SCREEN</span><span class="p">,</span>
    <span class="n">DISP_GEO_METHOD_ORIGIN_SIZE_OR_LETTER_BOX</span><span class="p">,</span>
    <span class="n">DISP_GEO_METHOD_CUSTOM_ROI</span><span class="p">,</span>
    <span class="n">DISP_GEO_METHOD_NUM</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">if</span> <span class="p">(</span><span class="n">tizen_disp_mode</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">tizen_destination_mode_set</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">tizen_video_dest_mode</span><span class="p">,</span> <span class="n">tizen_disp_mode</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ROI coordinates can be set only when the value of <code class="highlighter-rouge">display-geometry-method</code> is set to 5, and ROI coordinates are obtained from <code class="highlighter-rouge">gst_video_overlay_set_render_rectangle()</code> from the player or camera.</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">disp_geo_method</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">DISP_GEO_METHOD_CUSTOM_ROI</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">tizen_viewport_set_destination</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">tizen_video_viewport</span><span class="p">,</span> <span class="n">window</span><span class="o">-&gt;</span><span class="n">roi</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">window</span><span class="o">-&gt;</span><span class="n">roi</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">window</span><span class="o">-&gt;</span><span class="n">roi</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="n">window</span><span class="o">-&gt;</span><span class="n">roi</span><span class="p">.</span><span class="n">h</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The following examples describe the various available modes:</p>

<ul>
  <li>
    <p>Letterbox mode</p>

    <p>Fit the video source to the width or height of the window, aligned to the center and keeping the aspect ratio of the original video source.</p>

    <ul>
      <li>
        <p>Window (width/height) &gt; Video source (width/height)</p>

        <p><img src="media/letterbox-ex1.png" alt="Letterbox example 1" /></p>
      </li>
      <li>
        <p>Window (width/height) &lt; Video source (width/height)</p>

        <p><img src="media/letterbox-ex2.png" alt="Letterbox example 2" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Original size mode</p>

    <p>Set the video source size the same as the original video size, aligned to the center and keeping the aspect ratio of the original video source.</p>

    <ul>
      <li>
        <p>Window size &gt; Video source size</p>

        <p><img src="media/origin-mode-ex1.png" alt="Original size mode example 1" /></p>
      </li>
      <li>
        <p>Window size &lt; Video source size</p>

        <p><img src="media/origin-mode-ex2.png" alt="Original size mode example 2" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Cropped full screen mode</p>

    <p>Fit the video source to the width and height, cropping out the area outside the window, aligned to the center and keeping the aspect ratio of the original video source.</p>

    <ul>
      <li>
        <p>Window (width/height) &gt; Video source (width/height)</p>

        <p><img src="media/cropped-full-mode-ex1.png" alt="Cropped full screen mode example 1" /></p>
      </li>
      <li>
        <p>Window (width/height) &lt; Video source (width/height)</p>

        <p><img src="media/cropped-full-mode-ex2.png" alt="Cropped full screen mode example 2" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>ROI mode</p>

    <p>The user sets the location and size of where the video is rendered.</p>

    <ul>
      <li>
        <p>Window size: width(1920), height(1080), ROI size: x(100), y(100), width(800), height(400)</p>

        <p><img src="media/roi-ex.png" alt="ROI mode example" /></p>
      </li>
    </ul>
  </li>
</ul>

						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						    


<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
        
        
        
        
    
        <li>
            <a 
                href="iot/about/work-flow/" 
                data-target="#item1" 
                data-toggle="collapse" 
                data-parent="#stacked-menu"
                aria-expanded=" false "
                class=" collapsed "
                >
                    IOT Overview
                    <span class="caret arrow"></span>
            </a>
            

            
            <ul class="nav collapse" aria-expanded="false" id="#item1">
            

                
                <li>
                    
                    
                    <a 
                        href="iot/about/work-flow/" 
                        class=""
                        >
                        IOT Development Workflow
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/about/git-repo-structure/" 
                        class=""
                        >
                        IOT Git Repository Structure
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/about/conventions/" 
                        class=""
                        >
                        Typographic Conventions
                    </a>
                    
                </li>
                
            </ul>
            
        </li>
    
        
        
        
    
        <li>
            <a 
                href="iot/developing/installing" 
                data-target="#item2" 
                data-toggle="collapse" 
                data-parent="#stacked-menu"
                aria-expanded=" false "
                class=" collapsed "
                >
                    IOT Developing
                    <span class="caret arrow"></span>
            </a>
            

            
            <ul class="nav collapse" aria-expanded="false" id="#item2">
            

                
                <li>
                    
                    
                    <a 
                        href="iot/developing/installing/" 
                        class=""
                        >
                        Installing Development Tools
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/setting-up/" 
                        class=""
                        >
                        Setting up Development Environment
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/cloning/" 
                        class=""
                        >
                        Cloning Tizen Source Files
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/building/" 
                        class=""
                        >
                        Building Packages Locally with GBS
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/building-all/" 
                        class=""
                        >
                        Building All Packages Locally with GBS
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/contributing/" 
                        class=""
                        >
                        Contributing Code to Tizen
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/creating/" 
                        class=""
                        >
                        Creating Tizen Images with MIC
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/flashing/" 
                        class=""
                        >
                        Flashing an Image to Device
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/developing/tips/" 
                        class=""
                        >
                        Development Tips
                    </a>
                    
                </li>
                
            </ul>
            
        </li>
    
        
        
        
    
        <li>
            <a 
                href="iot/porting/overview/" 
                data-target="#item3" 
                data-toggle="collapse" 
                data-parent="#stacked-menu"
                aria-expanded=" true "
                class=" not-collapsed "
                >
                    Porting
                    <span class="caret arrow"></span>
            </a>
            

            
            <ul class="nav collapse in" aria-expanded="true" id="#item3">
            

                
                <li>
                    
                    
                    <a 
                        href="iot/porting/overview/" 
                        class=""
                        >
                        Overview
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/porting/kernel/" 
                        class=""
                        >
                        Kernel
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/porting/system/" 
                        class=""
                        >
                        System
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/porting/graphics-and-ui/" 
                        class=""
                        >
                        Graphics and UI
                    </a>
                    
                </li>
                
            </ul>
            
        </li>
    
        
        
        
    
        <li>
            <a 
                href="iot/reference/gerrit-usage/" 
                data-target="#item4" 
                data-toggle="collapse" 
                data-parent="#stacked-menu"
                aria-expanded=" false "
                class=" collapsed "
                >
                    Reference
                    <span class="caret arrow"></span>
            </a>
            

            
            <ul class="nav collapse" aria-expanded="false" id="#item4">
            

                
                <li>
                    
                    
                    <a 
                        href="iot/reference/gerrit-usage/" 
                        class=""
                        >
                        Gerrit
                    </a>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/reference/gbs/gbs-overview/"
                        class=""
                        aria-expanded=" false "
                        data-target="#item2" 
                        data-toggle="collapse" 
                        >
                        Git Build System (GBS)
                        <span class="caret arrow"></span>
                    </a>
                    
                    
                    <ul class="nav collapse" aria-expanded="false" id="#item2">
                    
                        
                        <li>
                            
                            <a 
                                href="iot/reference/gbs/gbs-overview/"
                                class=""
                                >
                                Overview
                            </a>
                        </li>
                        
                        <li>
                            
                            <a 
                                href="iot/reference/gbs/gbs.conf/"
                                class=""
                                >
                                GBS Configuration
                            </a>
                        </li>
                        
                        <li>
                            
                            <a 
                                href="iot/reference/gbs/gbs-maintenance-models/"
                                class=""
                                >
                                GBS Maintenance Models
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    
                    
                    <a 
                        href="iot/reference/mic/mic-overview/"
                        class=""
                        aria-expanded=" false "
                        data-target="#item3" 
                        data-toggle="collapse" 
                        >
                        MIC Image Creator
                        <span class="caret arrow"></span>
                    </a>
                    
                    
                    <ul class="nav collapse" aria-expanded="false" id="#item3">
                    
                        
                        <li>
                            
                            <a 
                                href="iot/reference/mic/mic-overview/"
                                class=""
                                >
                                Overview
                            </a>
                        </li>
                        
                        <li>
                            
                            <a 
                                href="iot/reference/mic/mic-customize-image/"
                                class=""
                                >
                                Customizing Images
                            </a>
                        </li>
                        
                        <li>
                            
                            <a 
                                href="iot/reference/mic/mic-reference/"
                                class=""
                                >
                                MIC Reference
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
            
        </li>
    
        
        
    </ul>
</div>
<script>
    $("a[href$='/iot/porting/multimedia/']").addClass("active currentPage");
</script>
						</div>
					</nav>
					<div class="col-toc">
						<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
                                        <li style="visibility: hidden">
                                            <a href="">
                                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i> 
                                                Edit this page
                                            </a>
                                        </li>
                                        
										<li>
                                            <a href="https://github.com/samsung-test/samsung-test.github.io/edit/1.1/iot/porting/multimedia.md" target="_blank">
                                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                Edit Page
                                            </a>
                                        </li>
                                        <li>
                                            <a href="https://github.com/samsung-test/samsung-test.github.io/issues/new" class="nomunge" target="_blank">
                                                <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                                Report Issue
                                            </a>
                                        </li>
									</ul>
								</div>
								   
									<div id="side-toc-title">On this page:</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#camera" class="nomunge">Camera</a>
    <ul>
      <li><a href="#porting-the-oal-interface" class="nomunge">Porting the OAL Interface</a></li>
      <li><a href="#configuration" class="nomunge">Configuration</a></li>
      <li><a href="#references" class="nomunge">References</a></li>
    </ul>
  </li>
  <li><a href="#radio" class="nomunge">Radio</a>
    <ul>
      <li><a href="#porting-the-oal-interface-1" class="nomunge">Porting the OAL Interface</a></li>
      <li><a href="#references-1" class="nomunge">References</a></li>
    </ul>
  </li>
  <li><a href="#audio" class="nomunge">Audio</a>
    <ul>
      <li><a href="#porting-the-oal-interface-2" class="nomunge">Porting the OAL Interface</a></li>
      <li><a href="#configuration-1" class="nomunge">Configuration</a></li>
      <li><a href="#references-2" class="nomunge">References</a></li>
    </ul>
  </li>
  <li><a href="#player" class="nomunge">Player</a>
    <ul>
      <li><a href="#porting-the-oal-interface-3" class="nomunge">Porting the OAL Interface</a></li>
      <li><a href="#configuration-2" class="nomunge">Configuration</a></li>
      <li><a href="#references-3" class="nomunge">References</a></li>
    </ul>
  </li>
  <li><a href="#codec" class="nomunge">Codec</a>
    <ul>
      <li><a href="#porting-the-oal-interface-4" class="nomunge">Porting the OAL Interface</a></li>
      <li><a href="#configuration-3" class="nomunge">Configuration</a></li>
      <li><a href="#references-4" class="nomunge">References</a></li>
    </ul>
  </li>
  <li><a href="#videosink" class="nomunge">Videosink</a>
    <ul>
      <li><a href="#porting-the-oal-interface-5" class="nomunge">Porting the OAL Interface</a></li>
      <li><a href="#tizen-specific-features-added-to-waylandsink" class="nomunge">Tizen-specific Features Added to Waylandsink</a></li>
    </ul>
  </li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
    <div class="container-fluid">
  <div class="top_footer">
    <div class="footer-nav">
      <nav class="footer_sub_nav">
        <ul class="menu">
          <li><a href="https://developer.tizen.org/">Developer</a></li>
          <li><a href="https://dashboard.tizen.org/">Dashboard</a></li>
          <li><a href="https://craftroom.tizen.org/">Craftroom</a></li>
        </ul>
      </nav>
    </div>
  </div>
  <div class="bottom_footer">
    <div class="footer-copyright col-xs-12 col-md-8">
      <p class="copyright">
        Copyright &copy; 2019 Tizen Inc. All rights reserved.
      </p>
    </div>
    <div class="footer_social_nav">
      <ul class="nav-social">
        <li class="fa fa-github"><a href="https://github.com/samsung-test">GitHub</a></li>  
        <li class="fa fa-twitter"><a href="https://twitter.com/TizenProject">Twitter</a></li>
        <li class="fa fa-facebook"><a href="http://www.facebook.com/pages/Tizen-Project">Facebook</a></li>
      </ul>
    </div>
  </div>
</div>

    <div id="templates"></div>
    <script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/common.js?v=04122019"></script>
<script type="text/javascript" src="/js/handlebars-v4.0.11.js?v=04122019"></script>
<script type="text/javascript" src="/js/widgets-data.js?v=04122019"></script>
<script type="text/javascript" src="/js/widgets.js?v=04122019"></script>
<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script type="text/javascript" src="/js/tocs.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>
<script type="text/javascript" src="/js/stickyfill.min.js"></script>
<script type="text/javascript" src="/js/metadata.js"></script>
<script type="text/javascript" src="/js/docs.js"></script>
</body>
</html>
